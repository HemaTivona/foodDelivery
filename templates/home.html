{% extends "base.html" %}

{% block title %}Home | Food App{% endblock %}

{% block content %}
<style>
    h2 {
        text-align: center;
        margin-top: 25px;
    }

    ul {
        list-style: none;
        padding: 0;
        max-width: 900px;
        margin: 20px auto;
    }

    li {
        background-color: #FFFFFF;
        padding: 18px;
        border-radius: 10px;
        margin-bottom: 15px;
        box-shadow: 0 4px 10px rgba(0,0,0,0.08);
    }

    li a {
        text-decoration: none;
        font-weight: 600;
        color: #007BFF;
    }

    .rating {
        font-weight: bold;
        color: #28A745;
    }

    .update-link {
        display: inline-block;
        margin-top: 10px;
        text-decoration: none;
        color: #555;
        font-weight: 600;
    }

    .update-link:hover {
        color: #000;
    }

    .add-btn {
        display: inline-block;
        padding: 10px 16px;
        background-color: #007BFF;
        color: #fff;
        border-radius: 8px;
        text-decoration: none;
        font-weight: 600;
    }

    .add-btn:hover {
        background-color: #0056B3;
    }
</style>

<!-- ✅ ADD RESTAURANT BUTTON (ADMIN / MANAGER ONLY) -->
{% if request.user.is_authenticated %}
    {% if request.user.profile.role == "admin" %}
        <div style="text-align:center; margin-bottom:20px;">
            <a href="{% url 'add' %}" class="add-btn">
                ➕ Add Restaurant
            </a>
        </div>
    {% endif %}
{% endif %}

<h2>Restaurants</h2>

{% if restaurants %}
<ul>
    {% for restaurant in restaurants %}
    <li>
        <strong>
            <a href="{% url 'restaurant_detail' restaurant.id %}">
                {{ restaurant.name }}
            </a>
        </strong><br><br>

        {{ restaurant.description }}<br>
        <span class="rating">⭐ {{ restaurant.rating }}</span><br>

        {% if request.user.is_authenticated and request.user.profile.role == "admin" %}
            <a href="{% url 'update_res' restaurant.id %}" class="update-link">
                Update
            </a>
        {% endif %}
    </li>
    {% endfor %}
</ul>
{% else %}
<p style="text-align:center;">No restaurants added yet.</p>
{% endif %}

{% endblock %}
